function init(){renderer=new THREE.WebGLRenderer({canvas:document.getElementById("cvs"),alpha:!0,antialias:!0}),renderer.setClearColor(16777215,0),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(windowHalfX,windowHalfY),container.appendChild(renderer.domElement),scene=new THREE.Scene;var e=windowHalfX/windowHalfY;camera=new THREE.PerspectiveCamera(45,e,1,1e4),camera.position.z=1500,cameraTarget=new THREE.Vector3(0,200,0),scene.add(camera),group=new THREE.Group,group.position.y=100,scene.add(group);var o=new THREE.SpotLight(16777215);o.position.set(0,1e4,0),o.castShadow=!0,o.angle=Math.PI/3,scene.add(o);var t=new THREE.TextureLoader,n=t.load("./js/机器人.png");material=new THREE.MeshBasicMaterial({aoMap:n});var a=new THREE.MTLLoader;a.load("http://or5y02dsh.bkt.clouddn.com/images/front/imgRbt/jqr.mtl",function(e){e.preload();var o=new THREE.OBJLoader;o.load("http://or5y02dsh.bkt.clouddn.com/images/front/imgRbt/jqr.obj",function(e){var o=e.children[0].geometry;o.attributes.uv2=o.attributes.uv,o.center(),mesh=new THREE.Mesh(o,material),mesh.scale.multiplyScalar(1.5),group.add(mesh)})}),document.addEventListener("mousedown",onDocumentMouseDown,!1),document.addEventListener("touchstart",onDocumentTouchStart,!1),document.addEventListener("touchmove",onDocumentTouchMove,!1),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){var e=windowHalfX/windowHalfY;camera.left=-height*e,camera.right=height*e,camera.top=height,camera.bottom=-height,camera.updateProjectionMatrix(),renderer.setSize(windowHalfX,windowHalfY)}function onDocumentMouseDown(e){e.preventDefault(),document.addEventListener("mousemove",onDocumentMouseMove,!1),document.addEventListener("mouseup",onDocumentMouseUp,!1),document.addEventListener("mouseout",onDocumentMouseOut,!1),mouseXOnMouseDown=e.clientX-windowHalfX,targetRotationOnMouseDown=targetRotation}function onDocumentMouseMove(e){mouseX=e.clientX-windowHalfX,targetRotation=targetRotationOnMouseDown+.02*(mouseX-mouseXOnMouseDown)}function onDocumentMouseUp(e){document.removeEventListener("mousemove",onDocumentMouseMove,!1),document.removeEventListener("mouseup",onDocumentMouseUp,!1),document.removeEventListener("mouseout",onDocumentMouseOut,!1)}function onDocumentMouseOut(e){document.removeEventListener("mousemove",onDocumentMouseMove,!1),document.removeEventListener("mouseup",onDocumentMouseUp,!1),document.removeEventListener("mouseout",onDocumentMouseOut,!1)}function onDocumentTouchStart(e){1==e.touches.length&&(e.preventDefault(),mouseXOnMouseDown=e.touches[0].pageX-windowHalfX,targetRotationOnMouseDown=targetRotation)}function onDocumentTouchMove(e){1==e.touches.length&&(e.preventDefault(),mouseX=e.touches[0].pageX-windowHalfX,targetRotation=targetRotationOnMouseDown+.05*(mouseX-mouseXOnMouseDown))}function animate(){renderer.setSize(windowHalfX,windowHalfY),requestAnimationFrame(animate),render()}function render(){group.rotation.y=-6.6,group.rotation.y+=1*(targetRotation-group.rotation.y),camera.lookAt(cameraTarget),renderer.setSize(windowHalfX,windowHalfY),renderer.render(scene,camera)}var supportsWebGL=function(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return!1}}();supportsWebGL?console.log("support"):alert("您的浏览器太旧啦！请更新您的浏览器"),Detector.webgl||Detector.addGetWebGLMessage();var group,plane,camera,scene,renderer,cameraTarget,mesh,material,container=document.getElementById("gameContainer"),targetRotation=6.7,windowHalfX=container.offsetWidth,windowHalfY=container.offsetHeight,height=container.offsetHeight,width=container.offsetWidth;init(),animate();